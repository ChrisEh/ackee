@using Ackee.Shared.Components.UI.LeftMenu
@inject Ackee.Shared.Services.StringManipulationService StringManipulationService

<div class="dashboardLayout">
    <AuthorizeView>
        <Authorized>
            <nav class="dashboardLayout_leftMenuContainer @(_menuExpanded ? "open" : "")">
                <LeftMenuComponent ProjectId="@ProjectId" PageName="@PageName"/>
            </nav>
            <div class="dashboardLayout_content @(!_menuExpanded ? "open" : "")">
                <div class="dashboardLayout_content_menuTogglerAndPageName">
                    <div class="dashboardLayout_content_menuTogglerContainer">
                        <div class="button button_actionButton dashboardLayout_content_toggleMenu dashboardLayout_content_toggleMenu__mobile" @onclick="ToggleMenu">
                            <span class="oi @(_menuExpanded ? "oi-arrow-left" : "oi-arrow-right")"></span>
                        </div>
                        <div class="button button_actionButton dashboardLayout_content_toggleMenu dashboardLayout_content_toggleMenu__bigScreens" @onclick="ToggleMenu">
                            <span class="oi @(_menuExpanded ? "oi-arrow-right" : "oi-arrow-left")"></span>
                        </div>
                    </div>                    
                    <h1>
                        @StringManipulationService.ToTitleCase(PageName)
                    </h1>
                </div>
                <main>
                    @ChildContent
                </main>
                
            </div>
        </Authorized>
        <NotAuthorized>
            <h1>Requested page not found.</h1>
        </NotAuthorized>
    </AuthorizeView>
</div>

@code {
    [Parameter]
    public string ProjectId { get; set; }

    [Parameter]
    public string PageName { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get; set; }

    private bool _menuExpanded = false;

    private void ToggleMenu()
    {
        _menuExpanded = !_menuExpanded;
    }
}

