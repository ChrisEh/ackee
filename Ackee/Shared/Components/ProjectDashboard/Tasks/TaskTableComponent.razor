@using Ackee.Data.Model
@inject Ackee.Shared.Services.DateTimeService DateTimeService
@inject Microsoft.AspNetCore.Components.NavigationManager NavigationManager

@if (Tasks != null && Tasks.Count != 0)
{
    <div class="taskTableComponent">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col">Task Name</th>
                    <th scope="col">Start Date</th>
                    <th scope="col">End Date</th>
                    <th scope="col">Milestones</th>
                    <th scope="col">Assignees</th>
                    <th scope="col">Status</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var task in Tasks)
                {
                    <tr @onclick="() => NavigateToTaskInformationPage(task.TaskID)">
                        <td>@task.TaskName</td>
                        <td>@DateTimeService.GetDateAsString("d", task.StartDate)</td>
                        <td>@DateTimeService.GetDateAsString("d", task.EndDate)</td>
                        <td>milestones here</td>
                        <td>members here</td>
                        <td>status here</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    
}
else
{
    <p>
        There are no tasks yet. Create your first one now!
    </p>
}

@code {
    [Parameter]
    public List<AspNetTasks> Tasks { get; set; }

    [Parameter]
    public string ProjectId { get; set; }

    private void NavigateToTaskInformationPage(string taskId)
    {
        NavigationManager.NavigateTo($"/projects/{ProjectId}/tasks/{taskId}");
    }
}
